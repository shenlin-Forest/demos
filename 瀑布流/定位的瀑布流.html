<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>task44</title>
<style>
*{ margin:0; padding:0;}
li{ list-style:none;}

#div1{ width:996px; height:auto; margin:20px auto; position:relative;}
li{ position:absolute;}
</style>
<script type="text/javascript" src="new_ajax.js"></script>
<script>
window.onload = function(){

	var aLi = document.getElementsByTagName('li');
	var aHeight = {L:[],C:[],R:[],F:[]};
	
	for(var i=0;i<aLi.length;i++){
		var iNow = i%4;
		
		switch(iNow){
			case 0:
				aLi[i].style.left = '16px';
				aHeight.L.push(aLi[i].offsetHeight);
				
				var step = Math.floor(i/4);
				
				//第一层
				if(!step){
					aLi[i].style.top = 0;
				}
				else{
					var sum = 0;
					for(var j=0;j<step;j++){
						sum += aHeight.L[j] + 16;
					}
					aLi[i].style.top = sum + 'px';
				}
			break;

			case 1:
				aLi[i].style.left = '273px';
				aHeight.C.push(aLi[i].offsetHeight);
				
				var step = Math.floor(i/4);
				
				if(!step){
					aLi[i].style.top = 0;
				}
				else{
					var sum = 0;
					for(var j=0;j<step;j++){
						sum += aHeight.C[j] + 16;
					}
					aLi[i].style.top = sum + 'px';
				}
			break;
			case 2:
				aLi[i].style.left = '530px';
				aHeight.R.push(aLi[i].offsetHeight);
				
				var step = Math.floor(i/4);
				
				if(!step){
					aLi[i].style.top = 0;
				}
				else{
					var sum = 0;
					for(var j=0;j<step;j++){
						sum += aHeight.R[j] + 16;
					}
					aLi[i].style.top = sum + 'px';
				}
			break;
			case 3:
				aLi[i].style.left = '787px';
				aHeight.F.push(aLi[i].offsetHeight);
				
				var step = Math.floor(i/4);
				
				if(!step){
					aLi[i].style.top = 0;
				}
				else{
					var sum = 0;
					for(var j=0;j<step;j++){
						sum += aHeight.F[j] + 16;
					}
					aLi[i].style.top = sum + 'px';
				}
			break;
		}
	}
	
};

</script>
</head>

<body>
<div id="div1">
	<ul>
    	<li>
        	<img src="img/1.jpg" />
            <p>这是第1张图片</p>
        </li>
        <li>
        	<img src="img/2.jpg" />
            <p>这是第2张图片</p>
        </li>
        <li>
        	<img src="img/3.jpg" />
            <p>这是第3张图片</p>
        </li>
    	<li>
        	<img src="img/4.jpg" />
            <p>这是第4张图片</p>
        </li>
        <li>
        	<img src="img/5.jpg" />
            <p>这是第5张图片</p>
        </li>
        <li>
        	<img src="img/6.jpg" />
            <p>这是第6张图片</p>
        </li>
        <li>
        	<img src="img/7.jpg" />
            <p>这是第7张图片</p>
        </li>
    	<li>
        	<img src="img/8.jpg" />
            <p>这是第8张图片</p>
        </li>
        <li>
        	<img src="img/9.jpg" />
            <p>这是第9张图片</p>
        </li>
        <li>
        	<img src="img/10.jpg" />
            <p>这是第10张图片</p>
        </li>
    	<li>
        	<img src="img/11.jpg" />
            <p>这是第11张图片</p>
        </li>
        <li>
        	<img src="img/12.jpg" />
            <p>这是第12张图片</p>
        </li>
        <li>
        	<img src="img/13.jpg" />
            <p>这是第13张图片</p>
        </li>
            	<li>
        	<img src="img/14.jpg" />
            <p>这是第14张图片</p>
        </li>
        <li>
        	<img src="img/15.jpg" />
            <p>这是第15张图片</p>
        </li>
  		 <li>
        	<img src="img/16.jpg" />
            <p>这是第16张图片</p>
        </li>
    </ul>
</div>
</body>
</html>
